{"ast":null,"code":"import { __awaiter, __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { environment } from \"../../environments/environment\";\nimport { MatChipsModule } from '@angular/material/chips';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nexport let TuModulo = /*#__PURE__*/(() => {\n  class TuModulo {}\n  TuModulo.ɵfac = function TuModulo_Factory(t) {\n    return new (t || TuModulo)();\n  };\n  TuModulo.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({\n    type: TuModulo\n  });\n  TuModulo.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({\n    imports: [MatChipsModule, CommonModule, BrowserModule]\n  });\n  return TuModulo;\n})();\nexport class AppModule {}\nlet DetalleDeProductoComponent = class DetalleDeProductoComponent {\n  constructor(carritoService, productosService, activatedRoute, dataSharingService) {\n    this.carritoService = carritoService;\n    this.productosService = productosService;\n    this.activatedRoute = activatedRoute;\n    this.dataSharingService = dataSharingService;\n    this.producto = {\n      id: 0,\n      fotos: [],\n      nombre: \"\",\n      descripcion: \"\",\n      precio: \"\"\n    };\n    this.indiceSeleccionado = 0;\n    this.yaExiste = true;\n  }\n  resolverFoto(foto) {\n    const baseUrl = environment.baseUrl;\n    return `${baseUrl}/foto_producto/${foto}`;\n  }\n  seleccionarImagen(indice) {\n    this.indiceSeleccionado = indice;\n    this.fotoSeleccionada = this.producto.fotos[this.indiceSeleccionado].foto;\n  }\n  quitarDelCarrito() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        id\n      } = this.producto;\n      const respuesta = yield this.carritoService.quitarProducto(id);\n      console.log({\n        respuesta\n      });\n      this.refrescarEstado();\n    });\n  }\n  agregarAlCarrito() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        id\n      } = this.producto;\n      const respuesta = yield this.carritoService.agregarAlCarrito(id);\n      console.log({\n        respuesta\n      });\n      this.refrescarEstado();\n    });\n  }\n  refrescarEstado() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const id = this.producto.id;\n      this.yaExiste = yield this.carritoService.existeEnCarrito(id);\n      // Comunicación entre componentes\n      this.dataSharingService.changeMessage(\"car_updated\");\n    });\n  }\n  ngOnInit() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const id = this.activatedRoute.snapshot.paramMap.get(\"id\");\n      this.producto = yield this.productosService.obtenerProductoConFotosPorId(id);\n      if (this.producto.fotos.length >= 0) {\n        this.seleccionarImagen(0);\n      }\n      this.refrescarEstado();\n    });\n  }\n};\nDetalleDeProductoComponent = __decorate([Component({\n  selector: 'app-detalle-de-producto',\n  templateUrl: './detalle-de-producto.component.html',\n  styleUrls: ['./detalle-de-producto.component.css']\n})], DetalleDeProductoComponent);\nexport { DetalleDeProductoComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { Cliente } from \"../cliente\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../carrito.service\";\nimport * as i2 from \"../data-sharing.service\";\nfunction TerminarCompraComponent_table_3_mat_header_cell_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\");\n    i0.ɵɵtext(1, \"Producto\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_cell_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r14 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r14.nombre, \"\");\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_header_cell_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\");\n    i0.ɵɵtext(1, \"Descripci\\u00F3n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_cell_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r15 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r15.descripcion, \"\");\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_header_cell_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\");\n    i0.ɵɵtext(1, \"Precio\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_cell_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r16 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, element_r16.precio), \"\");\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_header_cell_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\");\n    i0.ɵɵtext(1, \"Quitar\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_cell_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-cell\")(1, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function TerminarCompraComponent_table_3_mat_cell_12_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const element_r17 = restoredCtx.$implicit;\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r18.quitar(element_r17));\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \" delete \");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_header_row_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-header-row\");\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_row_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-row\");\n  }\n}\nfunction TerminarCompraComponent_table_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 12);\n    i0.ɵɵelementContainerStart(1, 13);\n    i0.ɵɵtemplate(2, TerminarCompraComponent_table_3_mat_header_cell_2_Template, 2, 0, \"mat-header-cell\", 14);\n    i0.ɵɵtemplate(3, TerminarCompraComponent_table_3_mat_cell_3_Template, 2, 1, \"mat-cell\", 15);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(4, 16);\n    i0.ɵɵtemplate(5, TerminarCompraComponent_table_3_mat_header_cell_5_Template, 2, 0, \"mat-header-cell\", 14);\n    i0.ɵɵtemplate(6, TerminarCompraComponent_table_3_mat_cell_6_Template, 2, 1, \"mat-cell\", 15);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(7, 17);\n    i0.ɵɵtemplate(8, TerminarCompraComponent_table_3_mat_header_cell_8_Template, 2, 0, \"mat-header-cell\", 14);\n    i0.ɵɵtemplate(9, TerminarCompraComponent_table_3_mat_cell_9_Template, 3, 3, \"mat-cell\", 15);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(10, 18);\n    i0.ɵɵtemplate(11, TerminarCompraComponent_table_3_mat_header_cell_11_Template, 2, 0, \"mat-header-cell\", 14);\n    i0.ɵɵtemplate(12, TerminarCompraComponent_table_3_mat_cell_12_Template, 4, 0, \"mat-cell\", 15);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtemplate(13, TerminarCompraComponent_table_3_mat_header_row_13_Template, 1, 0, \"mat-header-row\", 19);\n    i0.ɵɵtemplate(14, TerminarCompraComponent_table_3_mat_row_14_Template, 1, 0, \"mat-row\", 20);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"dataSource\", ctx_r1.productos);\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"matHeaderRowDef\", ctx_r1.columnas);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matRowDefColumns\", ctx_r1.columnas);\n  }\n}\nfunction TerminarCompraComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\", 22);\n    i0.ɵɵtext(2, \"\\u00A1Gracias por su compra!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"img\", 23);\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \"Su paquete llegar\\u00E1 a la direcci\\u00F3n especificada en los siguientes d\\u00EDas\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction TerminarCompraComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Por favor, rellene los formularios de los pasos anteriores \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let TerminarCompraComponent = /*#__PURE__*/(() => {\n  class TerminarCompraComponent {\n    constructor(carritoService, dataSharingService) {\n      this.carritoService = carritoService;\n      this.dataSharingService = dataSharingService;\n      this.compraTerminada = false;\n      this.productos = [];\n      this.columnas = ['nombre', 'descripcion', 'precio', 'quitar'];\n      this.clienteModel = new Cliente(\"\", \"\");\n    }\n    revisarYTerminar(stepper) {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (!this.clienteModel.direccion) {\n          return alert(\"Falta escribir la dirección del cliente\");\n        }\n        if (!this.clienteModel.nombre) {\n          return alert(\"Falta escribir el nombre del cliente\");\n        }\n        const respuestaCompra = yield this.carritoService.terminarCompra(this.clienteModel);\n        console.log({\n          respuestaCompra\n        });\n        this.compraTerminada = true;\n        stepper.next();\n        this.dataSharingService.changeMessage(\"car_updated\");\n      });\n    }\n    total() {\n      let total = 0;\n      this.productos.forEach(p => total += p.precio);\n      return total;\n    }\n    quitar(producto) {\n      return __awaiter(this, void 0, void 0, function* () {\n        yield this.carritoService.quitarProducto(producto.id);\n        yield this.obtenerProductos();\n        // Comunicación entre componentes\n        this.dataSharingService.changeMessage(\"car_updated\");\n      });\n    }\n    obtenerProductos() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.productos = yield this.carritoService.obtenerProductos();\n      });\n    }\n    irAPaso2() {}\n    ngOnInit() {\n      return __awaiter(this, void 0, void 0, function* () {\n        yield this.obtenerProductos();\n      });\n    }\n  }\n  TerminarCompraComponent.ɵfac = function TerminarCompraComponent_Factory(t) {\n    return new (t || TerminarCompraComponent)(i0.ɵɵdirectiveInject(i1.CarritoService), i0.ɵɵdirectiveInject(i2.DataSharingService));\n  };\n  TerminarCompraComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TerminarCompraComponent,\n    selectors: [[\"app-terminar-compra\"]],\n    decls: 30,\n    vars: 8,\n    consts: [[\"linear\", \"\"], [\"stepper\", \"\"], [\"label\", \"Revisar total\"], [\"mat-table\", \"\", 3, \"dataSource\", 4, \"ngIf\"], [\"matStepperNext\", \"\", \"mat-raised-button\", \"\", \"color\", \"primary\"], [\"label\", \"Datos del cliente\"], [\"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"Nombre\", 3, \"ngModel\", \"ngModelChange\"], [\"rows\", \"10\", \"matInput\", \"\", \"placeholder\", \"Direcci\\u00F3n de env\\u00EDo\", 3, \"ngModel\", \"ngModelChange\"], [\"matStepperPrevious\", \"\", \"mat-raised-button\", \"\", \"color\", \"primary\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\"], [\"label\", \"Gracias por su compra\"], [4, \"ngIf\"], [\"mat-table\", \"\", 3, \"dataSource\"], [\"matColumnDef\", \"nombre\"], [4, \"matHeaderCellDef\"], [4, \"matCellDef\"], [\"matColumnDef\", \"descripcion\"], [\"matColumnDef\", \"precio\"], [\"matColumnDef\", \"quitar\"], [4, \"matHeaderRowDef\"], [4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", 3, \"click\"], [1, \"mat-display-3\"], [\"src\", \"assets/order-complete.png\", \"alt\", \"Compra terminada\"]],\n    template: function TerminarCompraComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r21 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"mat-horizontal-stepper\", 0, 1)(2, \"mat-step\", 2);\n        i0.ɵɵtemplate(3, TerminarCompraComponent_table_3_Template, 15, 3, \"table\", 3);\n        i0.ɵɵelementStart(4, \"h2\");\n        i0.ɵɵtext(5);\n        i0.ɵɵpipe(6, \"currency\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"button\", 4);\n        i0.ɵɵtext(8, \"Continuar \");\n        i0.ɵɵelementStart(9, \"mat-icon\");\n        i0.ɵɵtext(10, \"arrow_forward\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(11, \"mat-step\", 5)(12, \"p\")(13, \"mat-form-field\")(14, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function TerminarCompraComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.clienteModel.nombre = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(15, \"p\")(16, \"mat-form-field\")(17, \"textarea\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function TerminarCompraComponent_Template_textarea_ngModelChange_17_listener($event) {\n          return ctx.clienteModel.direccion = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"button\", 8)(19, \"mat-icon\");\n        i0.ɵɵtext(20, \"arrow_back\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(21, \" Volver \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(22, \" \\u00A0 \");\n        i0.ɵɵelementStart(23, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function TerminarCompraComponent_Template_button_click_23_listener() {\n          i0.ɵɵrestoreView(_r21);\n          const _r0 = i0.ɵɵreference(1);\n          return i0.ɵɵresetView(ctx.revisarYTerminar(_r0));\n        });\n        i0.ɵɵtext(24, \"Terminar compra \");\n        i0.ɵɵelementStart(25, \"mat-icon\");\n        i0.ɵɵtext(26, \"check\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(27, \"mat-step\", 10);\n        i0.ɵɵtemplate(28, TerminarCompraComponent_div_28_Template, 6, 0, \"div\", 11);\n        i0.ɵɵtemplate(29, TerminarCompraComponent_div_29_Template, 2, 0, \"div\", 11);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.productos.length > 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Total: \", i0.ɵɵpipeBind1(6, 6, ctx.total()), \"\");\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngModel\", ctx.clienteModel.nombre);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.clienteModel.direccion);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngIf\", ctx.compraTerminada);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.compraTerminada);\n      }\n    },\n    styles: [\"table[_ngcontent-%COMP%]{width:100%}img[_ngcontent-%COMP%]{max-width:500px}\"]\n  });\n  return TerminarCompraComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { environment } from \"../../environments/environment\";\nimport { MatChipsModule } from '@angular/material/chips';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../carrito.service\";\nimport * as i2 from \"../productos.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../data-sharing.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/card\";\nimport * as i9 from \"@angular/material/grid-list\";\nimport * as i10 from \"@angular/material/chips\";\nfunction DetalleDeProductoComponent_img_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"img\", 9);\n    i0.ɵɵlistener(\"mouseenter\", function DetalleDeProductoComponent_img_4_Template_img_mouseenter_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const i_r6 = restoredCtx.index;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.seleccionarImagen(i_r6));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const foto_r5 = ctx.$implicit;\n    const i_r6 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"seleccionada\", i_r6 == ctx_r0.indiceSeleccionado);\n    i0.ɵɵproperty(\"src\", ctx_r0.resolverFoto(foto_r5.foto), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction DetalleDeProductoComponent_img_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 10);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r1.resolverFoto(ctx_r1.fotoSeleccionada), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction DetalleDeProductoComponent_mat_chip_list_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-chip-list\")(1, \"mat-chip\", 11)(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"check\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" En el carrito de compras \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DetalleDeProductoComponent_button_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function DetalleDeProductoComponent_button_19_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.agregarAlCarrito());\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"add\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Agregar al carrito \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DetalleDeProductoComponent_button_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function DetalleDeProductoComponent_button_20_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.quitarDelCarrito());\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Quitar del carrito \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let TuModulo = /*#__PURE__*/(() => {\n  class TuModulo {}\n  TuModulo.ɵfac = function TuModulo_Factory(t) {\n    return new (t || TuModulo)();\n  };\n  TuModulo.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({\n    type: TuModulo\n  });\n  TuModulo.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({\n    imports: [\n    // importar el módulo aquí\n    CommonModule, MatChipsModule]\n  });\n  return TuModulo;\n})();\nexport class AppModule {}\nexport let DetalleDeProductoComponent = /*#__PURE__*/(() => {\n  class DetalleDeProductoComponent {\n    constructor(carritoService, productosService, activatedRoute, dataSharingService) {\n      this.carritoService = carritoService;\n      this.productosService = productosService;\n      this.activatedRoute = activatedRoute;\n      this.dataSharingService = dataSharingService;\n      this.producto = {\n        id: 0,\n        fotos: [],\n        nombre: \"\",\n        descripcion: \"\",\n        precio: \"\"\n      };\n      this.indiceSeleccionado = 0;\n      this.yaExiste = true;\n    }\n    resolverFoto(foto) {\n      const baseUrl = environment.baseUrl;\n      return `${baseUrl}/foto_producto/${foto}`;\n    }\n    seleccionarImagen(indice) {\n      this.indiceSeleccionado = indice;\n      this.fotoSeleccionada = this.producto.fotos[this.indiceSeleccionado].foto;\n    }\n    quitarDelCarrito() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const {\n          id\n        } = this.producto;\n        const respuesta = yield this.carritoService.quitarProducto(id);\n        console.log({\n          respuesta\n        });\n        this.refrescarEstado();\n      });\n    }\n    agregarAlCarrito() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const {\n          id\n        } = this.producto;\n        const respuesta = yield this.carritoService.agregarAlCarrito(id);\n        console.log({\n          respuesta\n        });\n        this.refrescarEstado();\n      });\n    }\n    refrescarEstado() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const id = this.producto.id;\n        this.yaExiste = yield this.carritoService.existeEnCarrito(id);\n        // Comunicación entre componentes\n        this.dataSharingService.changeMessage(\"car_updated\");\n      });\n    }\n    ngOnInit() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const id = this.activatedRoute.snapshot.paramMap.get(\"id\");\n        this.producto = yield this.productosService.obtenerProductoConFotosPorId(id);\n        if (this.producto.fotos.length >= 0) {\n          this.seleccionarImagen(0);\n        }\n        this.refrescarEstado();\n      });\n    }\n  }\n  DetalleDeProductoComponent.ɵfac = function DetalleDeProductoComponent_Factory(t) {\n    return new (t || DetalleDeProductoComponent)(i0.ɵɵdirectiveInject(i1.CarritoService), i0.ɵɵdirectiveInject(i2.ProductosService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.DataSharingService));\n  };\n  DetalleDeProductoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DetalleDeProductoComponent,\n    selectors: [[\"app-detalle-de-producto\"]],\n    decls: 23,\n    vars: 10,\n    consts: [[\"cols\", \"2\"], [1, \"izquierda\"], [\"class\", \"imagen-izquierda\", \"alt\", \"Foto\", 3, \"seleccionada\", \"src\", \"mouseenter\", 4, \"ngFor\", \"ngForOf\"], [\"alt\", \"\", 3, \"src\", 4, \"ngIf\"], [1, \"detalles\"], [1, \"mat-display-2\"], [4, \"ngIf\"], [\"class\", \"carrito\", \"mat-raised-button\", \"\", \"color\", \"accent\", 3, \"click\", 4, \"ngIf\"], [\"routerLink\", \"/tienda\", \"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"comprar\"], [\"alt\", \"Foto\", 1, \"imagen-izquierda\", 3, \"src\", \"mouseenter\"], [\"alt\", \"\", 3, \"src\"], [\"color\", \"warn\", \"selected\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", 1, \"carrito\", 3, \"click\"]],\n    template: function DetalleDeProductoComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-card\")(1, \"mat-grid-list\", 0)(2, \"mat-grid-tile\")(3, \"div\", 1);\n        i0.ɵɵtemplate(4, DetalleDeProductoComponent_img_4_Template, 1, 3, \"img\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\");\n        i0.ɵɵtemplate(6, DetalleDeProductoComponent_img_6_Template, 1, 1, \"img\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"mat-grid-tile\", 4)(9, \"h1\", 5);\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"p\");\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"strong\");\n        i0.ɵɵtext(14, \"Precio\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"h1\", 5);\n        i0.ɵɵtext(16);\n        i0.ɵɵpipe(17, \"currency\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(18, DetalleDeProductoComponent_mat_chip_list_18_Template, 5, 0, \"mat-chip-list\", 6);\n        i0.ɵɵtemplate(19, DetalleDeProductoComponent_button_19_Template, 4, 0, \"button\", 7);\n        i0.ɵɵtemplate(20, DetalleDeProductoComponent_button_20_Template, 4, 0, \"button\", 7);\n        i0.ɵɵelementStart(21, \"a\", 8);\n        i0.ɵɵtext(22, \" Seguir comprando \");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.producto.fotos);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.fotoSeleccionada);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.producto.nombre);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.producto.descripcion);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(17, 8, ctx.producto.precio));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.yaExiste);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.yaExiste);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.yaExiste);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i3.RouterLink, i6.MatIcon, i7.MatAnchor, i7.MatButton, i8.MatCard, i9.MatGridList, i9.MatGridTile, i10.MatChip, i5.CurrencyPipe],\n    styles: [\"img[_ngcontent-%COMP%]{max-width:100%}img.imagen-izquierda[_ngcontent-%COMP%]{width:100px;min-width:100px;opacity:.7;display:block;margin-bottom:10px;cursor:pointer;border:5px solid #e0e0e0;border-radius:5%}img.imagen-izquierda.seleccionada[_ngcontent-%COMP%]{opacity:1}.izquierda[_ngcontent-%COMP%]{margin-right:15px}mat-grid-tile.detalles[_ngcontent-%COMP%]     figure{align-items:start!important;justify-content:start!important;display:block;padding:5px}button.carrito[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;margin:0 0 15px 5px}a.comprar[_ngcontent-%COMP%]{position:absolute;left:180px;bottom:0;margin:0 0 15px 5px}.mat-display-2[_ngcontent-%COMP%]{margin:0}p[_ngcontent-%COMP%]{font-size:1.3rem!important}\"]\n  });\n  return DetalleDeProductoComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
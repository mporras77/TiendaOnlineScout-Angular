{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nfunction ClientesComponent_tr_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const client_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r2.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r2.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r2.address);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r2.phone);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r2.joinDate);\n  }\n}\nfunction ClientesComponent_tr_42_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\")(16, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function ClientesComponent_tr_42_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const client_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.reactivateClient(client_r3.id));\n    });\n    i0.ɵɵtext(17, \"Reactivar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const client_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r3.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r3.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r3.address);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r3.phone);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r3.joinDate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r3.purchases);\n  }\n}\nexport let ClientesComponent = /*#__PURE__*/(() => {\n  class ClientesComponent {\n    constructor() {\n      this.activeClients = [{\n        id: 1,\n        name: 'Juan',\n        email: 'juan@mail.com',\n        address: 'Calle 123',\n        phone: '1234567890',\n        joinDate: '2022-02-01'\n      }, {\n        id: 2,\n        name: 'Maria',\n        email: 'maria@mail.com',\n        address: 'Calle 456',\n        phone: '0987654321',\n        joinDate: '2022-02-15'\n      }];\n      this.inactiveClients = [{\n        id: 3,\n        name: 'Pedro',\n        email: 'pedro@mail.com',\n        address: 'Calle 789',\n        phone: '5678901234',\n        joinDate: '2022-03-01',\n        purchases: 10\n      }, {\n        id: 4,\n        name: 'Laura',\n        email: 'laura@mail.com',\n        address: 'Calle 1011',\n        phone: '4321098765',\n        joinDate: '2022-03-15',\n        purchases: 20\n      }];\n    }\n    ngOnInit() {\n      // Mover clientes inactivos a lista de clientes inactivos si no han comprado en 5 semanas\n      setInterval(() => {\n        const inactiveClientsToRemove = [];\n        this.activeClients.forEach((client, index) => {\n          const joinDate = new Date(client.joinDate);\n          const currentDate = new Date();\n          const weeksInactive = Math.floor((currentDate.getTime() - joinDate.getTime()) / (1000 * 60 * 60 * 24 * 7));\n          if (weeksInactive >= 5) {\n            inactiveClientsToRemove.push(client);\n            this.inactiveClients.push(client);\n          }\n        });\n        this.activeClients = this.activeClients.filter(client => !inactiveClientsToRemove.includes(client));\n      }, 1000 * 60 * 60 * 24 * 7); // 1 semana en milisegundos\n    }\n\n    reactivateClient(clientId) {\n      const clientToReactivate = this.inactiveClients.find(client => client.id === clientId);\n      if (clientToReactivate && clientToReactivate.purchases > 15) {\n        this.activeClients.push(clientToReactivate);\n        this.inactiveClients = this.inactiveClients.filter(client => client.id !== clientId);\n        Swal.fire('¡Cliente Reactivado!', 'El cliente ha sido reactivado exitosamente.', 'success');\n      } else if (clientToReactivate) {\n        Swal.fire('No se pudo reactivar el cliente', 'El cliente debe tener más de 15 compras para poder ser reactivado.', 'error');\n      } else {\n        Swal.fire('No se encontró el cliente', 'El cliente que intenta reactivar no existe en la lista de clientes inactivos.', 'error');\n      }\n    }\n  }\n  ClientesComponent.ɵfac = function ClientesComponent_Factory(t) {\n    return new (t || ClientesComponent)();\n  };\n  ClientesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ClientesComponent,\n    selectors: [[\"app-clientes\"]],\n    decls: 43,\n    vars: 2,\n    consts: [[1, \"container\", \"mt-5\"], [1, \"table\", \"table-striped\", \"mt-3\"], [4, \"ngFor\", \"ngForOf\"], [1, \"mt-5\"], [1, \"btn\", \"btn-success\", 3, \"click\"]],\n    template: function ClientesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2, \"Clientes Activos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"table\", 1)(4, \"thead\")(5, \"tr\")(6, \"th\");\n        i0.ɵɵtext(7, \"ID\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"th\");\n        i0.ɵɵtext(9, \"Nombre\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"th\");\n        i0.ɵɵtext(11, \"Correo Electr\\u00F3nico\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"th\");\n        i0.ɵɵtext(13, \"Direcci\\u00F3n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"th\");\n        i0.ɵɵtext(15, \"Tel\\u00E9fono\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"th\");\n        i0.ɵɵtext(17, \"Fecha de Ingreso\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"tbody\");\n        i0.ɵɵtemplate(19, ClientesComponent_tr_19_Template, 13, 6, \"tr\", 2);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"h2\", 3);\n        i0.ɵɵtext(21, \"Clientes Inactivos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"table\", 1)(23, \"thead\")(24, \"tr\")(25, \"th\");\n        i0.ɵɵtext(26, \"ID\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"th\");\n        i0.ɵɵtext(28, \"Nombre\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"th\");\n        i0.ɵɵtext(30, \"Correo Electr\\u00F3nico\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"th\");\n        i0.ɵɵtext(32, \"Direcci\\u00F3n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"th\");\n        i0.ɵɵtext(34, \"Tel\\u00E9fono\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"th\");\n        i0.ɵɵtext(36, \"Fecha de Ingreso\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"th\");\n        i0.ɵɵtext(38, \"Compras Realizadas\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"th\");\n        i0.ɵɵtext(40, \"Acci\\u00F3n\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(41, \"tbody\");\n        i0.ɵɵtemplate(42, ClientesComponent_tr_42_Template, 18, 7, \"tr\", 2);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(19);\n        i0.ɵɵproperty(\"ngForOf\", ctx.activeClients);\n        i0.ɵɵadvance(23);\n        i0.ɵɵproperty(\"ngForOf\", ctx.inactiveClients);\n      }\n    },\n    dependencies: [i1.NgForOf],\n    styles: [\"h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:1rem}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.5rem;text-align:left}th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:700}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2f2}button[_ngcontent-%COMP%]{background-color:#007bff;border:none;border-radius:.25rem;color:#fff;cursor:pointer;font-size:1rem;padding:.5rem}button[_ngcontent-%COMP%]:hover{background-color:#0069d9}\"]\n  });\n  return ClientesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}